import{a as j,u as w,r as m,j as e}from"./index-CUPvuyHl.js";const v=({setSplitStage:c})=>{const{onAddItem:d}=j(),{members:s}=w(),[n,f]=m.useState(!1),[l,h]=m.useState(!1),[i,g]=m.useState(0),[r,b]=m.useState(0),[a,x]=m.useState({messageTax:"",messageDis:""});function N(t){let u={},p={};if(n&&l&&!i>0&&!r>0){u={messageTax:"tax cannot be 0/empty if toggled"},p={messageDis:"discount cannot be 0/empty if toggled"},x({...a,messageTax:u.messageTax,messageDis:p.messageDis}),setTimeout(()=>{x({})},2e3);return}if(n&&!i>0){u={messageTax:"tax cannot be 0/empty if toggled"},x({...a,messageTax:u.messageTax}),setTimeout(()=>{x({})},2e3);return}if(l&&!r>0){p={messageDis:"discount cannot be 0/empty if toggled"},x({...a,messageDis:p.messageDis}),setTimeout(()=>{x({})},2e3);return}if(n&&l){d(t,{itemId:"tax".concat(new Date().getTime()),itemName:"tax",totalPrice:Math.abs(Number(i)),membersForTheSplit:s.map(o=>o.name),pricePerHead:Number((i/s.length).toFixed(3))}),d(t,{itemId:"discount".concat(new Date().getTime()),itemName:"discount",totalPrice:Math.abs(Number(r))*-1,membersForTheSplit:s.map(o=>o.name),pricePerHead:Number((r/s.length).toFixed(3))*-1}),c("finalSplit");return}if(n){d(t,{itemId:"tax".concat(new Date().getTime()),itemName:"tax",totalPrice:Math.abs(Number(i)),membersForTheSplit:s.map(o=>o.name),pricePerHead:Number((i/s.length).toFixed(3))}),c("finalSplit");return}if(l){d(t,{itemId:"discount".concat(new Date().getTime()),itemName:"discount",totalPrice:Math.abs(Number(r))*-1,membersForTheSplit:s.map(o=>o.name),pricePerHead:Number((r/s.length).toFixed(3))*-1}),c("finalSplit");return}c("finalSplit")}return e.jsxs("div",{className:"absolute top-[27.5%] left-[12.5%] w-3/4 h-3/5 flex flex-col items-center space-y-14",children:[e.jsxs("div",{className:"w-3/5 max-w-[300px] h-1/5 flex flex-col items-center justify-center space-y-2",children:[e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx("span",{className:`text-lg ${n?"":"pointer-events-none opacity-25"}`,children:"tax"}),e.jsx("div",{className:"h-full w-[50px] bg-black rounded-full flex items-center px-[2.5px]",children:e.jsx("span",{className:`absolute h-[20px] w-[20px] rounded-full
                        ${n?"translate-x-[25px] bg-violet-400":"translate-x-0 bg-white"} duration-500`,onClick:()=>{f(!n),g("")}})})]}),e.jsx("input",{id:"taxInput",type:"number",min:0,className:`p-3 w-full max-w-[500px] h-[50px] bg-transparent border-2 ${a.messageTax?"border-red-400":"border-purple-400"} outline-none rounded-md text-lg placeholder:text-[12px] ${n?"":"pointer-events-none opacity-25"}`,placeholder:"enter tax amount",value:i,onChange:t=>{g(Number(t.target.value))}}),a.messageTax?e.jsx("p",{className:"w-full text-center text-xs flex items-center justify-center space-x-2 text-red-400",children:a.messageTax}):e.jsx("span",{className:"w-full text-slate-400 text-center text-xs flex items-center justify-center space-x-2",children:e.jsx("div",{children:"if you've added 'tax' as an item in the bill, do not add tax again!"})})]}),e.jsxs("div",{className:"relative w-3/5 max-w-[300px] h-1/5 flex flex-col items-center justify-center space-y-2",children:[e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx("span",{className:`text-lg ${l?"":"pointer-events-none opacity-25"}`,children:"discount"}),e.jsx("div",{className:"h-full w-[50px] bg-black rounded-full flex items-center px-[2.5px]",children:e.jsx("span",{className:`absolute h-[20px] w-[20px] rounded-full
                        ${l?"translate-x-[25px] bg-violet-400":"translate-x-0 bg-white"} duration-500`,onClick:()=>{h(!l),b("")}})})]}),e.jsx("input",{type:"number",min:0,className:`p-3 w-full max-w-[500px] h-[50px] bg-transparent border-2 ${a.messageDis?"border-red-400":"border-purple-400"} outline-none rounded-md text-lg placeholder:text-[12px] ${l?"":"pointer-events-none opacity-25"}`,placeholder:"enter the discounted price",value:Math.abs(r),onChange:t=>{b(Math.abs(Number(t.target.value)))}}),a.messageDis?e.jsx("p",{className:"absolute top-[110%] text-center text-xs text-red-400",children:a.messageDis}):e.jsx(e.Fragment,{})]}),e.jsx("div",{className:"relative mt-5 h-[80px] mx-auto w-full max-w-[600px] flex items-center justify-center",children:e.jsx("button",{type:"button",className:"w-2/5 h-[50px] max-w-[200px] bg-black rounded-md hover:bg-purple-400 hover:text-black",onClick:t=>{N(t)},children:"done"})})]})};export{v as default};
